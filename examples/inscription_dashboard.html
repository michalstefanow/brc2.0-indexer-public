<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Inscription Monitor - Real-time Network Activity</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; }
        .header { text-align: center; color: white; margin-bottom: 30px; }
        .header h1 { font-size: 2.5rem; margin-bottom: 10px; }
        .header p { font-size: 1.1rem; opacity: 0.9; }
        
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; }
        .stat-number { font-size: 2rem; font-weight: bold; color: #2c3e50; }
        
        .main-content { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .inscription-feed { background: white; border-radius: 15px; padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .block-info { background: white; border-radius: 15px; padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        
        .inscription-item { padding: 15px; border-bottom: 1px solid #eee; transition: background 0.3s; }
        .inscription-item:hover { background: #f8f9fa; }
        .inscription-item.new { background: #e8f5e8; border-left: 4px solid #28a745; }
        .inscription-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .inscription-type { font-weight: bold; color: #2c3e50; }
        .inscription-time { color: #666; font-size: 0.9rem; }
        .inscription-details { color: #666; font-size: 0.9rem; }
        
        .block-item { padding: 15px; border-bottom: 1px solid #eee; }
        .block-number { font-weight: bold; color: #2c3e50; font-size: 1.2rem; }
        .block-hash { font-family: monospace; font-size: 0.8rem; color: #666; word-break: break-all; }
        .block-transactions { color: #666; }
        
        .refresh-btn { background: #2c3e50; color: white; border: none; padding: 12px 25px; border-radius: 25px; cursor: pointer; margin-bottom: 20px; }
        .search-box { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 20px; font-size: 1rem; }
        
        .loading { text-align: center; color: #666; font-style: italic; }
        .error { background: #fee; color: #c33; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        
        .live-indicator { display: inline-block; width: 12px; height: 12px; background: #28a745; border-radius: 50%; margin-right: 8px; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
        
        .filter-tabs { display: flex; gap: 10px; margin-bottom: 20px; }
        .filter-tab { padding: 8px 16px; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; background: white; }
        .filter-tab.active { background: #2c3e50; color: white; }
        
        @media (max-width: 768px) {
            .main-content { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç Live Inscription Monitor</h1>
            <p>Real-time Network Activity from Your Bitcoin Indexer</p>
        </div>
        
        <button class="refresh-btn" onclick="loadData()">üîÑ Refresh Live Data</button>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="totalBlocks">-</div>
                <div>Total Blocks</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalInscriptions">-</div>
                <div>Total Inscriptions</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="currentBlock">-</div>
                <div>Current Block</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="networkStatus">-</div>
                <div>Network Status</div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="inscription-feed">
                <h2><span class="live-indicator"></span>Live Inscription Feed</h2>
                
                <div class="filter-tabs">
                    <div class="filter-tab active" onclick="filterInscriptions('all')">All</div>
                    <div class="filter-tab" onclick="filterInscriptions('deploy')">Deploy</div>
                    <div class="filter-tab" onclick="filterInscriptions('mint')">Mint</div>
                    <div class="filter-tab" onclick="filterInscriptions('transfer')">Transfer</div>
                </div>
                
                <div id="inscriptionFeed">Loading inscriptions...</div>
            </div>
            
            <div class="block-info">
                <h2>üì¶ Recent Blocks</h2>
                <div id="blockList">Loading blocks...</div>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const CONFIG = {
            REFRESH_INTERVAL: 15000, // 15 seconds for real-time feel
            MAX_INSCRIPTIONS_DISPLAY: 100,
            MAX_BLOCKS_DISPLAY: 50
        };

        // Mock inscription data based on your monitoring
        const mockInscriptions = [
            { type: 'Deploy', token: 'NEW', block: 266033, time: 'Just now', details: 'New token deployment detected', new: true },
            { type: 'Mint', token: 'ORDI', block: 266032, time: '2 min ago', details: '1000 ORDI minted', new: false },
            { type: 'Transfer', token: 'SATS', block: 266032, time: '3 min ago', details: '50000 SATS transferred', new: false },
            { type: 'Mint', token: 'MEME', block: 266031, time: '5 min ago', details: '100 MEME minted', new: false },
            { type: 'Deploy', token: 'TEST', block: 266030, time: '8 min ago', details: 'Test token deployment', new: false },
            { type: 'Transfer', token: 'ORDI', block: 266029, time: '10 min ago', details: '250 ORDI transferred', new: false }
        ];

        // Mock block data
        const mockBlocks = [
            { number: 266033, hash: '0000000687c1192ba6d6d1742743770075091b41b172102b3f61cef4aacfa02b', transactions: 0, time: 'Just now', inscriptions: 1 },
            { number: 266032, hash: '0000000fa1d01385a203d0bbb6f7e4d9c436b3ba249b50fe22ce10cb29c86f84', transactions: 41, time: '5 min ago', inscriptions: 2 },
            { number: 266031, hash: '0000001234567890abcdef1234567890abcdef1234567890abcdef1234567890ab', transactions: 38, time: '10 min ago', inscriptions: 1 },
            { number: 266030, hash: '0000000987654321fedcba0987654321fedcba0987654321fedcba0987654321fe', transactions: 35, time: '15 min ago', inscriptions: 0 }
        ];

        // Main inscription monitor class
        class InscriptionMonitor {
            constructor() {
                this.inscriptions = [...mockInscriptions];
                this.blocks = [...mockBlocks];
                this.currentFilter = 'all';
                this.init();
            }

            async init() {
                await this.loadData();
                this.startAutoRefresh();
                this.setupEventListeners();
            }

            async loadData() {
                try {
                    await Promise.all([
                        this.loadStats(),
                        this.loadInscriptionFeed(),
                        this.loadBlockList()
                    ]);
                } catch (error) {
                    console.error('Error loading data:', error);
                    this.showError('Failed to load inscription data');
                }
            }

            async loadStats() {
                try {
                    const stats = {
                        totalBlocks: 266033,
                        totalInscriptions: 4917,
                        currentBlock: 266033,
                        networkStatus: 'Live'
                    };

                    document.getElementById('totalBlocks').textContent = stats.totalBlocks.toLocaleString();
                    document.getElementById('totalInscriptions').textContent = stats.totalInscriptions.toLocaleString();
                    document.getElementById('currentBlock').textContent = stats.currentBlock.toLocaleString();
                    document.getElementById('networkStatus').textContent = stats.networkStatus;

                } catch (error) {
                    console.error('Error loading stats:', error);
                }
            }

            async loadInscriptionFeed() {
                try {
                    const feedDiv = document.getElementById('inscriptionFeed');
                    
                    if (this.inscriptions.length === 0) {
                        feedDiv.innerHTML = '<div class="loading">No inscriptions found</div>';
                        return;
                    }

                    const filteredInscriptions = this.filterInscriptionsByType(this.inscriptions, this.currentFilter);
                    
                    const html = filteredInscriptions.map(inscription => `
                        <div class="inscription-item ${inscription.new ? 'new' : ''}">
                            <div class="inscription-header">
                                <div class="inscription-type">${inscription.type} - ${inscription.token}</div>
                                <div class="inscription-time">${inscription.time}</div>
                            </div>
                            <div class="inscription-details">
                                <div>Block: ${inscription.block}</div>
                                <div>${inscription.details}</div>
                            </div>
                        </div>
                    `).join('');

                    feedDiv.innerHTML = html;

                } catch (error) {
                    console.error('Error loading inscription feed:', error);
                    document.getElementById('inscriptionFeed').innerHTML = '<div class="error">Failed to load inscriptions</div>';
                }
            }

            async loadBlockList() {
                try {
                    const blockListDiv = document.getElementById('blockList');
                    
                    if (this.blocks.length === 0) {
                        blockListDiv.innerHTML = '<div class="loading">No blocks found</div>';
                        return;
                    }

                    const html = this.blocks.map(block => `
                        <div class="block-item">
                            <div class="block-number">Block ${block.number}</div>
                            <div class="block-hash">${block.hash}</div>
                            <div class="block-transactions">
                                Transactions: ${block.transactions} | Inscriptions: ${block.inscriptions} | ${block.time}
                            </div>
                        </div>
                    `).join('');

                    blockListDiv.innerHTML = html;

                } catch (error) {
                    console.error('Error loading block list:', error);
                    document.getElementById('blockList').innerHTML = '<div class="error">Failed to load blocks</div>';
                }
            }

            filterInscriptionsByType(inscriptions, filter) {
                if (filter === 'all') return inscriptions;
                return inscriptions.filter(inscription => 
                    inscription.type.toLowerCase() === filter.toLowerCase()
                );
            }

            setFilter(filter) {
                this.currentFilter = filter;
                
                // Update active tab
                document.querySelectorAll('.filter-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                event.target.classList.add('active');
                
                this.loadInscriptionFeed();
            }

            startAutoRefresh() {
                setInterval(() => {
                    this.loadData();
                }, CONFIG.REFRESH_INTERVAL);
            }

            setupEventListeners() {
                // Add any additional event listeners here
            }

            showError(message) {
                const container = document.querySelector('.container');
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error';
                errorDiv.textContent = message;
                container.insertBefore(errorDiv, container.firstChild);
                
                setTimeout(() => {
                    errorDiv.remove();
                }, 5000);
            }
        }

        // Global functions
        function filterInscriptions(type) {
            const monitor = new InscriptionMonitor();
            monitor.setFilter(type);
        }

        async function loadData() {
            const monitor = new InscriptionMonitor();
            await monitor.loadData();
        }

        // Initialize monitor when page loads
        document.addEventListener('DOMContentLoaded', () => {
            new InscriptionMonitor();
        });
    </script>
</body>
</html>
